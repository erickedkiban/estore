"use strict";(globalThis["webpackChunkfirebaseaut"]=globalThis["webpackChunkfirebaseaut"]||[]).push([[438],{8438:(e,t,l)=>{l.r(t),l.d(t,{default:()=>N});var s=l(9835),a=l(6970);const r={class:"row"},i={class:"col-8"},d={class:"text-h5 text-weight-light text-uppercase q-mb-sm"},c={class:"flex justify-end"},n={class:"q-pt-lg q-pb-lg",style:{width:"100%"}},u={class:"col-4"},o={class:"q-pl-xl"},p=(0,s._)("div",{class:"text-h5 text-weight-light text-uppercase"}," Payable Amount ",-1),h={class:"text-h5 text-weight-light text-uppercase q-mb-md",style:{color:"#d89f65"}},v=(0,s._)("div",{class:"flex justify-between q-mt-lg"},null,-1),b={class:"flex justify-between items-center"},m=(0,s._)("div",null,[(0,s._)("div",{class:"text-subtitle2 text-uppercase"}," Add Cash Received ")],-1),g={class:"q-pt-md q-pb-md"},f={class:"text-subtitle1 text-uppercase text-weight-medium flex justify-between"},x=(0,s._)("div",null,"Subtotal",-1),w={class:"text-subtitle1 text-uppercase text-weight-medium flex justify-between"},_=(0,s._)("div",null,"Change",-1),y={key:0},q={key:1},P=(0,s._)("div",{class:"text-subtitle1 text-uppercase text-weight-medium flex justify-between"},[(0,s._)("div",null,[(0,s.Uk)(" Service Charge "),(0,s._)("span",{class:"text-weight-light q-ml-sm"},"0%")]),(0,s._)("div",null,"0")],-1),k={class:"flex justify-between text-uppercase text-weight-light text-h5"},C=(0,s._)("div",null,"Total",-1),O={class:"q-mt-xl"};function W(e,t,l,W,Z,j){const I=(0,s.up)("q-checkbox"),Q=(0,s.up)("q-separator"),T=(0,s.up)("q-btn"),R=(0,s.up)("q-table"),z=(0,s.up)("q-input"),H=(0,s.up)("q-card-section"),V=(0,s.up)("q-card"),E=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(E,{class:"q-ma-lg",style:{"min-height":"0 !important"}},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",r,[(0,s._)("div",i,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Object.keys(W.segregatedOrders),(e=>((0,s.wg)(),(0,s.iD)("div",{key:e},[(0,s._)("div",d," order #: "+(0,a.zw)(e),1),(0,s._)("div",c,[(0,s.Wm)(I,{style:{position:"relative",top:"-10px"},modelValue:W.selectedTables,"onUpdate:modelValue":t[0]||(t[0]=e=>W.selectedTables=e),val:e,dense:""},null,8,["modelValue","val"])]),(0,s.Wm)(Q,{style:{color:"#d8dbd9"}}),(0,s.Wm)(R,{grid:"","grid-header":"",flat:"",bordered:"",rows:W.segregatedOrders[e],columns:W.columns,"row-key":"name","hide-header":""},{bottom:(0,s.w5)((()=>[(0,s._)("div",n,[(0,s.Wm)(T,{push:"",class:"text-uppercase text-black text-weight-light full-width text-h6",color:"red",label:"Cancel Order",onClick:t=>W.cancelOrder(e)},null,8,["onClick"])])])),_:2},1032,["rows","columns"])])))),128))]),(0,s._)("div",u,[(0,s._)("div",o,[p,(0,s._)("div",h," P"+(0,a.zw)(W.totalPrice),1),(0,s.Wm)(Q,{style:{color:"#d8dbd9"}}),v,(0,s._)("div",null,[(0,s.Wm)(V,{class:"q-mt-lg",style:{background:"#eaf0f0"}},{default:(0,s.w5)((()=>[(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s._)("div",b,[m,(0,s._)("div",null,[(0,s.Wm)(z,{"input-style":{fontSize:"20px"},modelValue:W.cashReceived,"onUpdate:modelValue":t[1]||(t[1]=e=>W.cashReceived=e),dense:W.dense},null,8,["modelValue","dense"])])])])),_:1})])),_:1})]),(0,s._)("div",g,[(0,s._)("div",f,[x,(0,s._)("div",null,"P"+(0,a.zw)(W.totalPrice),1)]),(0,s._)("div",w,[_,W.cashReceived>W.totalPrice?((0,s.wg)(),(0,s.iD)("div",y," P"+(0,a.zw)(W.cashReceived-W.totalPrice),1)):((0,s.wg)(),(0,s.iD)("div",q,"P0"))]),P]),(0,s.Wm)(Q,{class:"q-mb-xl",style:{color:"#d8dbd9"}}),(0,s._)("div",k,[C,(0,s._)("div",null,"P"+(0,a.zw)(W.totalPrice),1)]),(0,s._)("div",O,[(0,s.Wm)(T,{style:{background:"#8bb5be",width:"100%"},class:"text-uppercase text-h5"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Pay Now ")])),_:1})])])])])])])),_:1})}l(9665);var Z=l(499),j=l(222),I=l(6605),Q=l(9017);const T=[{name:"item",required:!0,label:"ITEM",align:"left",field:e=>e.name,sortable:!0},{name:"price",align:"center",label:"PRICE",field:e=>e.price,sortable:!0},{name:"qty",label:"QTY",field:e=>e.order_quantity,sortable:!0}],R={setup(){const e=(0,Z.iH)([]),t=(0,Z.iH)(null),l=(0,Z.iH)(""),a=(0,Z.iH)([]),r=(0,s.FN)().appContext.config.globalProperties,i=(0,j.ZF)(r.$firebaseConfig),d=(0,Q.ad)(i),c=(0,s.Fl)((()=>{const t=[];for(const l of e.value)u.value.hasOwnProperty(l)&&t.push(...u.value[l]);return t})),n=(0,s.Fl)((()=>c.value.reduce(((e,t)=>e+t.total),0))),u=(0,s.Fl)((()=>{const e={};return a.value.forEach((t=>{const l=t.orderId;e[l]||(e[l]=[]);const s=t.orders.map((e=>{const t=e.price*e.order_quantity;return{...e,total:t}}));e[l].push(...s)})),e}));async function o(){const e=(0,I.v0)().currentUser;if(e){const t=(0,Q.IO)((0,Q.hJ)(d,"orders")),l=await(0,Q.PL)(t),s=[];l.docs.forEach((t=>{const l=t.data();Array.isArray(l.orders)&&l.orders.length>0&&l.userId===e.uid&&"unpaid"===l.payment_status&&s.push(l)})),a.value=s}}async function p(e){const t=(0,Q.IO)((0,Q.hJ)(d,"orders"),(0,Q.ar)("orderId","==",e)),l=await(0,Q.PL)(t);l.forEach((async e=>{await(0,Q.oe)(e.ref)})),a.value=a.value.filter((t=>t.orderId!==e))}return(0,s.YP)(e,(e=>{0===e.length&&(t.value=null)})),(0,s.bv)(o),{selectedTables:e,cashReceived:t,uuid:l,orders:a,columns:T,selectedOrders:c,totalPrice:n,segregatedOrders:u,cancelOrder:p,dense:(0,Z.iH)(!1)}}};var z=l(1639),H=l(9885),V=l(1221),E=l(926),F=l(6008),S=l(4455),U=l(4458),A=l(3190),D=l(3119),Y=l(9984),J=l.n(Y);const L=(0,z.Z)(R,[["render",W]]),N=L;J()(R,"components",{QPage:H.Z,QCheckbox:V.Z,QSeparator:E.Z,QTable:F.Z,QBtn:S.Z,QCard:U.Z,QCardSection:A.Z,QInput:D.Z})}}]);