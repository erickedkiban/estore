"use strict";(globalThis["webpackChunkfirebaseaut"]=globalThis["webpackChunkfirebaseaut"]||[]).push([[564],{9564:(e,r,a)=>{a.r(r),a.d(r,{default:()=>v});var t=a(9835);const o={class:"q-pa-md"};function n(e,r,a,n,s,l){const i=(0,t.up)("q-btn"),d=(0,t.up)("q-table");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t.Wm)(d,{flat:"",bordered:"",title:"YOR POS Report",rows:n.orders,columns:n.columns,"row-key":"orderId",pagination:n.pagination,"onUpdate:pagination":r[0]||(r[0]=e=>n.pagination=e)},{"top-right":(0,t.w5)((()=>[(0,t.Wm)(i,{onClick:n.printReport,label:"Print Report",icon:"print",color:"primary"},null,8,["onClick"])])),pagination:(0,t.w5)((e=>[e.pagesNumber>2?((0,t.wg)(),(0,t.j4)(i,{key:0,icon:"first_page",color:"grey-8",round:"",dense:"",flat:"",disable:e.isFirstPage,onClick:e.firstPage},null,8,["disable","onClick"])):(0,t.kq)("",!0),(0,t.Wm)(i,{icon:"chevron_left",color:"grey-8",round:"",dense:"",flat:"",disable:e.isFirstPage,onClick:e.prevPage},null,8,["disable","onClick"]),(0,t.Wm)(i,{icon:"chevron_right",color:"grey-8",round:"",dense:"",flat:"",disable:e.isLastPage,onClick:e.nextPage},null,8,["disable","onClick"]),e.pagesNumber>2?((0,t.wg)(),(0,t.j4)(i,{key:1,icon:"last_page",color:"grey-8",round:"",dense:"",flat:"",disable:e.isLastPage,onClick:e.lastPage},null,8,["disable","onClick"])):(0,t.kq)("",!0)])),_:1},8,["rows","columns","pagination"])])}a(9665);var s=a(499),l=a(6605),i=a(222),d=a(9017),c=a(1893),p=a.n(c),u=a(1842);p().vfs=u.I.vfs;const g={setup(){const e=(0,t.FN)().appContext.config.globalProperties,r=(0,s.iH)([]),a=(0,i.ZF)(e.$firebaseConfig),o=(0,d.ad)(a),n=async()=>{const e=(0,l.v0)().currentUser;if(e){const a=(0,d.IO)((0,d.hJ)(o,"report")),t=await(0,d.PL)(a),n=[];t.docs.forEach((r=>{const a=r.data();Array.isArray(a.orders)&&a.orders[0].userId===e.uid&&n.push(a)})),r.value=n}};(0,t.bv)((()=>{n()}));const c=()=>{const e=r.value;if(e&&e.length>0){const r=e.map((e=>e.orders&&e.orders.length>0?e.orders.map((e=>[e.orders.map((e=>[e.name])),e.orders.map((e=>[e.category])),e.orders.map((e=>[e.order_quantity])),e.orders.map((e=>[e.price]))])):[])).flat(),a={content:[{text:"YorPos Report",style:"header"},{style:"tableExample",table:{body:[["Item Name","Item Category","Order Quantity","Item Price"],...r]},layout:"lightHorizontalLines"}],styles:{header:{fontSize:18,bold:!0,margin:[0,0,0,10]},tableExample:{margin:[0,5,0,15]}}};p().createPdf(a).download("YourPosReport.pdf")}else console.error("No orders data available")},u=(0,t.Fl)((()=>r.value.map((e=>({...e,orderId:e.orders[0].orderId,payment_status:e.orders[0].payment_status,timestamp:new Date(1e3*e.timestamp.seconds)}))))),g=(0,t.Fl)((()=>{let e=0;return r.value.forEach((r=>{r.orders.forEach((r=>{r.orders.forEach((r=>{e=r.order_quantity}))}))})),e})),m=[{name:"orderId",required:!0,label:"Order ID",align:"center",field:"orderId",sortable:!0},{name:"cashReceived",required:!0,label:"Cash Received",align:"center",field:"cashReceived",sortable:!0},{name:"orderDate",required:!0,label:"Payment Date",align:"center",field:"timestamp",format:e=>e.toLocaleString(),sortable:!0},{name:"price",required:!0,label:"Total Price",align:"center",field:e=>e.cashReceived-e.change,sortable:!0},{name:"payment_status",required:!0,label:"Payment Status",align:"center",field:"payment_status",sortable:!0}],b=(0,s.iH)({sortBy:"orderId",descending:!1,page:1,rowsPerPage:10});return{orders:u,columns:m,pagination:b,getData:n,computedTotalQuantity:g,printReport:c}}};var m=a(1639),b=a(6008),f=a(4455),y=a(9984),h=a.n(y);const P=(0,m.Z)(g,[["render",n]]),v=P;h()(g,"components",{QTable:b.Z,QBtn:f.Z})}}]);